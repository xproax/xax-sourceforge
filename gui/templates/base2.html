<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-gb" lang="en-gb" dir="ltr">
<head>
<script type="text/javascript">

    openSystem = function() {
        var opened = false;
        var opened2 = false;
        var opened3 = false;
        var p = dijit.byId("content");

        var c = p.getChildren();
        for(var i=0; i<c.length; i++){
            if(c[i].title == 'Reporting'){
                p.selectChild(c[i]);
                opened = true;
            } else if(c[i].title == 'Settings'){
                p.selectChild(c[i]);
                opened2 = true;
            } else if(c[i].title == 'System Information'){
                p.selectChild(c[i]);
                opened3 = true;
            }
        }
        if(opened != true) {
            var pane = new dijit.layout.ContentPane({ 
                title: 'Reporting',
                refreshOnShow: true,
                closable: true,
                href:'{% url system_reporting %}',
            });
            p.addChild(pane);
        }

        if(opened2 != true) {
            var pane2 = new dijit.layout.ContentPane({ 
                id: 'settingstab',
                title: 'Settings',
                refreshOnShow: true,
                closable: true,
                href:'{% url system_settings %}',
            });
            p.addChild(pane2);
        }

        if(opened3 != true) {
            var pane3 = new dijit.layout.ContentPane({ 
                id: 'sysinfotab',
                title: 'System Information',
                refreshOnShow: true,
                closable: true,
                href:'{% url system_info %}',
            });
            p.addChild(pane3);
            p.selectChild(pane3);
        }
        //p.selectChild(pane);
        //var mytree = dijit.byId("mytree");
        //mytree.set('path', ['continentRoot','System']);

    }

    openNetwork = function(tab) {
        var opened = false;
        var p = dijit.byId("content");

        var c = p.getChildren();
        for(var i=0; i<c.length; i++){
            if(c[i].title == 'Network Settings'){
                p.selectChild(c[i]);
                opened = true;
                if(tab) {
                    var tabnet = dijit.byId("tab_networksettings");
                    if(tabnet) {
                        var c2 = tabnet.getChildren();
                        for(var j=0; j<c2.length; j++){
                            if(c2[j].title == tab)
                                tabnet.selectChild(c2[j]);
                        }
                    }
                }

            }
        }
        if(opened != true) {
            openurl = '{% url network_home %}';
            if(tab) {
                openurl += '?tab='+tab;
            }

            var pane = new dijit.layout.ContentPane({ 
                title: 'Network Settings',
                closable: true,
                //refreshOnShow: true,
                href: openurl,
            });
            p.addChild(pane);
            p.selectChild(pane);
        }

        //if(tab) { alert("open "+tab); }

        //p.selectChild(pane);
        //var mytree = dijit.byId("mytree");
        //mytree.set('path', ['continentRoot','System']);

    }

    openSharing = function() {
        var opened = false;
        var p = dijit.byId("content");

        var c = p.getChildren();
        for(var i=0; i<c.length; i++){
            if(c[i].title == 'Shares'){
                p.selectChild(c[i]);
                opened = true;
            }
        }
        if(opened != true) {
            var pane = new dijit.layout.ContentPane({ 
                title: 'Shares',
                closable: true,
                //refreshOnShow: true,
                href:'{% url sharing_home %}',
            });
            p.addChild(pane);
            p.selectChild(pane);
        }

        //var mytree = dijit.byId("mytree");
        //mytree.set('path', ['Sharing']);
    }

    openServices = function() {
        var opened = false;
        var p = dijit.byId("content");

        var c = p.getChildren();
        for(var i=0; i<c.length; i++){
            if(c[i].title == 'Services'){
                p.selectChild(c[i]);
                opened = true;
            }
        }
        if(opened != true) {
            var pane = new dijit.layout.ContentPane({ 
                title: 'Services',
                closable: true,
                href:'{% url services_home %}',
            });
            p.addChild(pane);
            p.selectChild(pane);
        }

        //var mytree = dijit.byId("mytree");
        //mytree.set('path', ['continentRoot','System']);
    }

    openAccount = function(tab) {
        var opened = false;
        var p = dijit.byId("content");

        var c = p.getChildren();
        for(var i=0; i<c.length; i++){
            if(c[i].title == 'Account'){
                p.selectChild(c[i]);
                opened = true;
                if(tab) {
                    var tabnet = dijit.byId("tab_account");
                    if(tabnet) {
                        var c2 = tabnet.getChildren();
                        for(var j=0; j<c2.length; j++){
                            if(c2[j].title == tab)
                                tabnet.selectChild(c2[j]);
                        }
                    }
                }
                
            }
        }
        if(opened != true) {
            openurl = '{% url account_home %}';
            if(tab) {
                openurl += '?tab='+tab;
            }
            var pane = new dijit.layout.ContentPane({ 
                title: 'Account',
                closable: true,
                href:openurl,
            });
            p.addChild(pane);
            p.selectChild(pane);

        }
        //var mytree = dijit.byId("mytree");
        //mytree.set('path', ['continentRoot','System']);
    }

    openStorage = function() {
        var opened = false;
        var p = dijit.byId("content");

        var c = p.getChildren();
        for(var i=0; i<c.length; i++){
            if(c[i].title == 'Storage'){
                p.selectChild(c[i]);
                opened = true;
            }
        }
        if(opened != true) {
            var pane = new dijit.layout.ContentPane({ 
                id: 'topmenu_storage',
                title: 'Storage',
                closable: true,
                refreshOnShow: true,
                href:'{% url storage_home %}',
            });
            p.addChild(pane);
            dojo.addClass(pane.domNode,["objrefresh", "data_storage_Volumes"]);
            p.selectChild(pane);
        }

        //var mytree = dijit.byId("mytree");
        //mytree.set('path', ['continentRoot','System']);
    }

    function toggle_service(obj) {
         obj.src = '/services/toggle/' + obj.name + '/' + Date();
    }
</script>
    <title>{{ freenas_version }}</title>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <style type="text/css">html, body.{{ DOJANGO.THEME }} { width: 100%; height: 100%; }</style>
    {% include "dojango/include.html" %}
<link href="/freenas/media/favicon.ico" rel="shortcut icon" type="image/x-icon" />
<link rel="stylesheet" href="/freenas/media/css/template.css" type="text/css" />
{% block dojango_header_extra %}{% endblock %}
</head>
<body class="{{ DOJANGO.THEME }}">
    <div id="wrap">
		<div data-dojo-type="dijit.layout.ContentPane" region:"top", style:"height: 100px;" gutters="false">
                <div id="page-header">
                    <div>
                        <a href="/" title="FreeNAS"><img src="/freenas/media/images/ui/freenas-logo.png" alt="FreeNAS" /></a>
                    </div>
                </div>
		{% block menubar %}
		{% include "common/menubar2.html" %}
                {% endblock %}
            	</div>
           
            {% block dojango_content %}
            {% endblock %}
</div>
	<div id="footer" data-dojo-type="dijit.layout.ContentPane" region:"bottom", style:"height: 100px;background: #464C53 !important; " splitter="true">
        {% block footer %}
        {% include "footer.html" %}
        {% endblock %}
	</div>
</body>
</html>
