{% extends "base.html" %}

{% block dojango_header_extra %}
<script type="text/javascript">
    dojo.addOnLoad(function() {
            rebootDlg = dijit.byId("rebootDialog");
            dojo.connect(dijit.byId("reboot_button"), "onClick", rebootDlg, "show");
            });
    dojo.addOnLoad(function() {
            shutdownDlg = dijit.byId("shutdownDialog");
            dojo.connect(dijit.byId("shutdown_button"), "onClick", shutdownDlg, "show");
            });
</script>
{% endblock %}

{% block content %}
<div dojoType="dijit.MenuBar" id="navMenu">

            <div dojoType="dijit.MenuBarItem" onClick="window.location='/'" class=" dijitMenuItemSelected ">
                <div>
                    System 
                </div>
            </div>

    <div dojoType="dijit.MenuBarItem" onClick="window.location='/network/'">
        <span>
            Network 
        </span>
    </div>

    <div dojoType="dijit.MenuBarItem" onClick="window.location='/storage/'">
        <span>
            Storage 
        </span>
    </div>

    <div dojoType="dijit.MenuBarItem" onClick="window.location='/sharing/'">
        <span>
            Sharing
        </span>
    </div>

    <div dojoType="dijit.MenuBarItem" onClick="window.location='/services/'">
        <span>
            Services
        </span>
    </div>


    {% if user.is_authenticated %}
    <div dojoType="dijit.MenuBarItem" onClick="window.location='/account/logout/'" style="position:relative;float:right;font-weight:bold;">
        <span>
            Log Out 
        </span>
    </div>
    <div dojoType="dijit.MenuBarItem" onClick="window.location='/account/password_change/'">
        <span>
            Account 
        </span>
    </div>
    {% else %}

    <div dojoType="dijit.MenuBarItem" onClick="window.location='/account/login/'" style="position:relative;float:right;font-weight:bold;">
        <span>
            Log In
        </span>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block dojango_content %}
    <div dojoType="dijit.layout.ContentPane">
        {% include "freenas/system/submenu.html" %}
    </div>
<div dojoType="dijit.layout.TabContainer" style="width:100%;" doLayout="false">
    <div dojoType="dijit.layout.ContentPane" title="System Information" id="Information">
        <table>

            <tr>
                <td class="label"><strong>Hostname:</strong></td>
                <td class="descr">{{ hostname }}</td>
            </tr>
            <tr>
                <td class="label"><strong>OS Version:</strong></td>
                <td class="descr">{{ uname1 }} {{ uname2 }}</td>
            </tr>
            <tr>
                <td class="label"><strong>Platform:</strong></td>
                <td class="descr">{{ platform }}</td>
            </tr>
            <tr>
                <td class="label"><strong>System Time:</strong></td>
                <td class="descr">{{ date }}</td>
            </tr>
            <tr>
                <td class="label"><strong>Uptime:</strong></td>
                <td class="descr">{{ uptime }}</td>
            </tr>
            <tr>
                <td class="label"><strong>Load Average:</strong></td>
                <td class="descr">{{ loadavg }}</td>
            </tr>
            <tr>
                <td class="label"><strong>FreeNAS Build:</strong></td>
                <td class="descr">{{ freenas_build }}</td>
            </tr>
        
                  </table>
    </div>
    <div dojoType="dijit.layout.ContentPane" title="Settings">
<form action="system/settings/" method="post">{% csrf_token %}
    <table class="config">
                {% for field in settings %}
                <tr>
                    <td>
                        <label for="{{ field.auto_id }}">
                            {% if field.field.required %}
                                <span class="required">{{ field.label }}</span>
                            {% else %}
                                {{ field.label }}
                            {% endif %}
                        </label>
                    </td>
                    <td>
                        {{ field }}
                    </td>
                </tr>
            {% endfor %}
    </table>
<button style="margin-top:16px;" dojoType="dijit.form.Button" type="submit">Save Settings</button>
</form>
    </div>

    <div dojoType="dijit.layout.ContentPane" title="Advanced">
<form action="system/advanced/" method="post">{% csrf_token %}
    <table class="config">
                {% for field in advanced %}
                <td>
                    {{ field.errors }}
                </td>
                <tr>
                    <td>
                        <label for="{{ field.auto_id }}">
                            {% if field.field.required %}
                                <span class="required">{{ field.label }}</span>
                            {% else %}
                                {{ field.label }}
                            {% endif %}
                        </label>
                    </td>
                    <td>
                        {{ field }}
                    </td>
                </tr>
            {% endfor %}
    </table>
    <p clss="btn">
    <button style="margin-top:16px;" dojoType="dijit.form.Button" type="submit">Save Settings</button>
    </p>
    </form>
    </div>
</div>
{% endblock %}
