{% extends "base.html" %}

{% block content %}
<div style="float:left;">
    <h1>Network</h1>
</div>
{% endblock %}
{% block dojango_content %}
{% if user.is_authenticated %}
<div dojoType="dijit.layout.TabContainer" style="width:100%;height:400px;" >
    <div dojoType="dijit.layout.TabContainer" title="Network Settings" nested="true">
        <div dojoType="dijit.layout.ContentPane" title="Global Configuration" selected="true">
                        <form action="global/configuration/" method="post">{% csrf_token %}
            <table>
                <tr>
                    <td>
                            {{ gc }}
                    </td>
                </tr>
            </table>
                        <button dojoType="dijit.form.Button" type="submit">Save Configuration</button>
                        </form>
        </div>
        <div dojoType="dijit.layout.ContentPane" title="Interfaces">
            <span style="margin:22px;">
                    <button id="int_button" dojoType="dijit.form.Button" type="button">
                        Add Interface
                        <script type="dojo/method" event="onClick" args="evt">
                        dijit.byId("int").show();
                    </script>
                    </button>
                </span>
                        {% for i in int_list %}
            <table style="border:1px dotted #c5c5c5;margin:6px;float:left;">
                <tr><td><strong>Interface:</strong></td>
                    <td>
                            {{ i.int_interface }}
                    </td>
                </tr>
                <tr><td><strong>Name:</strong></td>
                    <td>
                            {{ i.int_name }}
                    </td>
                </tr>
                <tr><td><strong>DHCP:</strong></td>
                    <td>
                            {{ i.int_dhcp }}
                    </td>
                </tr>
                <tr><td><strong>IPv4 Gateway:</strong></td>
                    <td>
                            {{ i.int_ipv4gateway }}
                    </td>
                </tr>
                <tr><td><strong>IPv6 Gateway:</strong></td>
                    <td>
                            {{ i.int_ipv6gateway }}
                    </td>
                </tr>
                <tr><td><strong>IPv6 Auto-configure:</strong></td>
                    <td>
                            {{ i.int_ipv6auto }}
                    </td>
                </tr>
                <tr><td><strong>IPv6 Address:</strong></td>
                    <td>
                            {{ i.int_ipv6address }}
                    </td>
                </tr>
                <tr><td><strong>Options:</strong></td>
                    <td>
                            {{ i.int_options }}
                    </td>
                </tr>
                <tr>
                    <td>
                        <button dojoType="dijit.form.Button" type="button" onClick="window.location='/network/interfaces/edit/{{ i.id }}/'">Edit {{ i.int_interface }}</button>
                    </td>
                </tr>

            </table>
                        {% endfor %}
        </div>
        <div dojoType="dijit.layout.ContentPane" title="VLAN">
                    <button id="vlan_button" dojoType="dijit.form.Button" type="button">
                        Add VLAN Interface
                        <script type="dojo/method" event="onClick" args="evt">
                        dijit.byId("vlan").show();
                    </script>
                    </button>
        </div>
        <div dojoType="dijit.layout.ContentPane" title="LAGG">
                    <button id="lagg_button" dojoType="dijit.form.Button" type="button">
                       Add LAGG Interface 
                        <script type="dojo/method" event="onClick" args="evt">
                        dijit.byId("lagg").show();
                    </script>
                    </button>
        </div>
        <div dojoType="dijit.layout.ContentPane" title="Static Routes">
            <table style="border:1px dotted #c5c5c5;margin:6px;float:left;">
	        <thead>
		    <td>Destination</td>
		    <td>Gateway</td>
		    <td>Description</td>
		    <td>Actions</td>
		</thead>
		{% for i in sr_list %}
		<tr>
		    <td>{{ i.sr_destination }}</td>
		    <td>{{ i.sr_gateway }}</td>
		    <td>{{ i.sr_description }}</td>
                    <td>
			<button dojoType="dijit.form.Button" type="button" onClick="window.location='/network/staticroute/edit/{{ i.id }}/'">Edit</button>
			<button dojoType="dijit.form.Button" type="button" onClick="window.location='/network/staticroute/delete/{{ i.id }}/'">Delete</button>
		    </td>
		</tr>
		{% empty %}
		<tr>
			<td colspan="5">No static route defined</td>
		</tr>
		{% endfor %}
            </table>
                    <button id="sr_button" dojoType="dijit.form.Button" type="button">
                       Add Static Route 
                        <script type="dojo/method" event="onClick" args="evt">
                        dijit.byId("sr").show();
                    </script>
        </div>
</div>

<br />
</div>


<div id="int" dojoType="dijit.Dialog" closable="true" title="Add Interface">
<form action="global/int/" method="post">{% csrf_token %}
 <table>
     {{ interfaces }}
    </table>
<button dojoType="dijit.form.Button" type="submit">Add Interface</button>
<button dojoType="dijit.form.Button" type="button" onClick="dijit.byId('int').hide();">
    Cancel
</button>
</form>
</div>

<div id="vlan" dojoType="dijit.Dialog" closable="true" title="Add VLAN">
<form action="global/vlan/" method="post">{% csrf_token %}
    <table>
        {{ vlan }}
    </table>
<button dojoType="dijit.form.Button" type="submit">Add VLAN</button>
<button dojoType="dijit.form.Button" type="button" onClick="dijit.byId('vlan').hide();">
    Cancel
</button>
</form>
</div>

<div id="lagg" dojoType="dijit.Dialog" closable="true" title="Add LAGG">
<form action="global/lagg/" method="post">{% csrf_token %}
    <table>
        {{ lagg }}
         </table>
<button dojoType="dijit.form.Button" type="submit">Add LAGG</button>
<button dojoType="dijit.form.Button" type="button" onClick="dijit.byId('lagg').hide();">
    Cancel
</button>
</form>
</div>

<div id="sr" dojoType="dijit.Dialog" closable="true" title="Add Static Route">
<form action="global/sr/" method="post">{% csrf_token %}
    <table>
        {{ staticroute }}
    </table>
<button dojoType="dijit.form.Button" type="submit">Add Static Route</button>
<button dojoType="dijit.form.Button" type="button" onClick="dijit.byId('sr').hide();">
    Cancel
</button>
</form>
</div>
            
{% else %}
    <p>Welcome. Please <a href="/freenas/login/">log in</a>.</p>
{% endif %}

{% endblock %}

