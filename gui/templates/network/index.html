{% extends "base.html" %}

{% block dojango_header_extra %}
{% endblock %}
{% block content %}
<div dojoType="dijit.MenuBar" id="navMenu">
            <div dojoType="dijit.MenuBarItem" onClick="window.location='/'">
                <div>
                    System 
                </div>
            </div>

    <div dojoType="dijit.MenuBarItem" onClick="window.location='/network/'" class=" dijitMenuItemSelected ">
        <span>
            Network 
        </span>
    </div>

    <div dojoType="dijit.MenuBarItem" onClick="window.location='/storage/'">
        <span>
            Storage 
        </span>
    </div>

    <div dojoType="dijit.MenuBarItem" onClick="window.location='/sharing/'">
        <span>
            Sharing
        </span>
    </div>

    <div dojoType="dijit.MenuBarItem" onClick="window.location='/services/'">
        <span>
            Services
        </span>
    </div>


    {% if user.is_authenticated %}
    <div dojoType="dijit.MenuBarItem" onClick="window.location='/account/logout/'" style="position:relative;float:right;font-weight:bold;">
        <span>
            Log Out 
        </span>
    </div>
    <div dojoType="dijit.MenuBarItem" onClick="window.location='/account/password_change/'">
        <span>
            Account 
        </span>
    </div>
    {% else %}

    <div dojoType="dijit.MenuBarItem" onClick="window.location='/account/login/'" style="position:relative;float:right;font-weight:bold;">
        <span>
            Log In
        </span>
    </div>
    {% endif %}
</div>
{% endblock %}
{% block dojango_content %}
{% if user.is_authenticated %}
<div dojoType="dijit.layout.TabContainer" style="width:100%;height:400px;" >
    <div dojoType="dijit.layout.TabContainer" title="Network Settings" nested="true">
        <div dojoType="dijit.layout.ContentPane" title="Global Configuration" selected="true">
            <form action="/network/global/configuration/" method="post">{% csrf_token %}
            <table class="config">
                {% for field in gc %}
                <tr>
                    <td>
                        <label for="{{ field.auto_id }}">
                            {% if field.field.required %}
                                <span class="required">{{ field.label }}</span>
                            {% else %}
                                {{ field.label }}
                            {% endif %}
                        </label>
                    </td>
                    <td>
                        {{ field }}
			{{ field.errors }}
                    </td>
                </tr>
            {% endfor %}
            </table>
            <p class="btn">
            <button dojoType="dijit.form.Button" type="submit">Save Configuration</button>
            </p>
            </form>
        </div>
        <div dojoType="dijit.layout.ContentPane" title="Interfaces">
            <table class="grid">
	            <thead class="header">
		            <td>Interface</td>
		            <td>Name</td>
		            <td>DHCP</td>
		            <td>IPv4 Gateway</td>
		            <td>IPv6 Gateway</td>
		            <td>IPv6 Auto</td>
		            <td>IPv6 Address</td>
		            <td>Options</td>
		        </thead>
                {% for i in int_list %}
                <tr class="{% cycle 'odd' 'even' %}" id="{{ i.id }}">
                    <td>{{ i.int_interface }}</td>
                    <td>{{ i.int_name }}</td>
                    <td>{{ i.int_dhcp }}</td>
                    <td>{{ i.int_ipv4gateway }}</td>
                    <td>{{ i.int_ipv6gateway }}</td>
                    <td>{{ i.int_ipv6auto }}</td>
                    <td>{{ i.int_ipv6address }}</td>
                    <td>{{ i.int_options }}</td>
                    <td>
                        <button dojoType="dijit.form.Button" type="button" onClick="window.location='/network/interfaces/edit/{{ i.id }}/'">Edit</button>
                        <button dojoType="dijit.form.Button" type="button" onClick="window.location='/network/interfaces/delete/{{ i.id }}/'">Delete</button>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5">No interfaces defined</td>
                </tr>
                {% endfor %}
                </table>
                <p class="btn">
                    <button id="int_button" dojoType="dijit.form.Button" type="button">
                        Add Interface
                        <script type="dojo/method" event="onClick" args="evt">
                        dijit.byId("int").show();
                    </script>
                    </button>
                    </p>
        </div>
        <div dojoType="dijit.layout.ContentPane" title="VLAN">
              <table class="grid">
	            <thead class="header">
		            <td>Virtual Interface</td>
		            <td>Physical Interface</td>
		            <td>VLAN Tag</td>
		            <td>Description</td>
		        </thead>
                {% for v in vlan_list %}
                <tr class="{% cycle 'odd' 'even' %}" id="{{ v.id }}">
                    <td>{{ v.vlan_vint }}</td>
                    <td>{{ v.vlan_pint }}</td>
                    <td>{{ v.vlan_tag }}</td>
                    <td>{{ v.vlan_description }}</td>
                    <td>
                        <button dojoType="dijit.form.Button" type="button" onClick="window.location='/network/vlan/edit/{{ v.id }}/'">Edit</button>
                        <button dojoType="dijit.form.Button" type="button" onClick="window.location='/network/vlan/delete/{{ v.id }}/'">Delete</button>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5">No VLAN defined</td>
                </tr>
                {% endfor %}
                </table>
                <p class="btn">
                    <button id="vlan_button" dojoType="dijit.form.Button" type="button">
                        Add VLAN Interface
                        <script type="dojo/method" event="onClick" args="evt">
                        dijit.byId("vlan").show();
                    </script>
                    </button>
                    </p>
        </div>
        <div dojoType="dijit.layout.ContentPane" title="LAGG">
            <table class="grid">
	            <thead class="header">
		            <td>Virtual Interface</td>
		            <td>Ports</td>
		            <td>Description</td>
		        </thead>
                {% for l in lagg_list %}
                <tr class="{% cycle 'odd' 'even' %}" id="{{ l.id }}">
                    <td>{{ l.lagg_vint }}</td>
                    <td>{{ l.lagg_ports }}</td>
                    <td>{{ l.lagg_description }}</td>
                    <td>
                        <button dojoType="dijit.form.Button" type="button" onClick="window.location='/network/lagg/edit/{{ l.id }}/'">Edit</button>
                        <button dojoType="dijit.form.Button" type="button" onClick="window.location='/network/lagg/delete/{{ l.id }}/'">Delete</button>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5">No LAGG interface defined</td>
                </tr>
                {% endfor %}
                </table>

                <p class="btn">
                    <button id="lagg_button" dojoType="dijit.form.Button" type="button">
                       Add LAGG Interface 
                        <script type="dojo/method" event="onClick" args="evt">
                        dijit.byId("lagg").show();
                    </script>
                    </button>
                    </p>
        </div>
        <div dojoType="dijit.layout.ContentPane" title="Static Routes">
            <table class="grid">
	        <thead class="header">
		    <td>Destination</td>
		    <td>Gateway</td>
		    <td>Description</td>
		    <td>Actions</td>
		</thead>
		{% for i in sr_list %}
          <tr class="{% cycle 'odd' 'even' %}" id="{{ i.id }}">
		    <td>{{ i.sr_destination }}</td>
		    <td>{{ i.sr_gateway }}</td>
		    <td>{{ i.sr_description }}</td>
                    <td>
			<button dojoType="dijit.form.Button" type="button" onClick="window.location='/network/staticroute/edit/{{ i.id }}/'">Edit</button>
			<button dojoType="dijit.form.Button" type="button" onClick="window.location='/network/staticroute/delete/{{ i.id }}/'">Delete</button>
		    </td>
		</tr>
		{% empty %}
		<tr>
			<td colspan="5">No static route defined</td>
		</tr>
		{% endfor %}
            </table>
                    <button id="sr_button" dojoType="dijit.form.Button" type="button">
                       Add Static Route 
                        <script type="dojo/method" event="onClick" args="evt">
                        dijit.byId("sr").show();
                    </script>
        </div>
</div>

<br />
</div>


<div id="int" dojoType="dijit.Dialog" closable="true" title="Add Interface">
<form action="/network/global/int/" method="post">{% csrf_token %}
 <table>
     {{ interfaces }}
    </table>
<button dojoType="dijit.form.Button" type="submit">Add Interface</button>
<button dojoType="dijit.form.Button" type="button" onClick="dijit.byId('int').hide();">
    Cancel
</button>
</form>
</div>

<div id="vlan" dojoType="dijit.Dialog" closable="true" title="Add VLAN">
<form action="/network/global/vlan/" method="post">{% csrf_token %}
    <table>
        {{ vlan }}
    </table>
<button dojoType="dijit.form.Button" type="submit">Add VLAN</button>
<button dojoType="dijit.form.Button" type="button" onClick="dijit.byId('vlan').hide();">
    Cancel
</button>
</form>
</div>

<div id="lagg" dojoType="dijit.Dialog" closable="true" title="Add LAGG">
<form action="/network/global/lagg/" method="post">{% csrf_token %}
    <table>
        {{ lagg }}
         </table>
<button dojoType="dijit.form.Button" type="submit">Add LAGG</button>
<button dojoType="dijit.form.Button" type="button" onClick="dijit.byId('lagg').hide();">
    Cancel
</button>
</form>
</div>

<div id="sr" dojoType="dijit.Dialog" closable="true" title="Add Static Route">
<form action="/network/global/sr/" method="post">{% csrf_token %}
    <table>
        {{ staticroute }}
    </table>
<button dojoType="dijit.form.Button" type="submit">Add Static Route</button>
<button dojoType="dijit.form.Button" type="button" onClick="dijit.byId('sr').hide();">
    Cancel
</button>
</form>
</div>
            
{% else %}
    <p>Welcome. Please <a href="/freenas/login/">log in</a>.</p>
{% endif %}

{% endblock %}

