{% extends "base.html" %}
{% load i18n %}

{% block dojango_content %}
<script type="text/javascript">
    dojo.require("dojo.data.ItemFileReadStore");
    dojo.require("dojo.data.ItemFileWriteStore");
    dojo.require("dijit.Tree");
    dojo.require("dojo.io.iframe");
    dojo.require("dojox.validate.regexp");
    dojo.require("dijit.layout.BorderContainer");
    dojo.require("dijit.layout.ContentPane");
    dojo.require("dijit.layout.TabContainer");
    dojo.require("dojo._base.xhr");
    dojo.require("dijit.ProgressBar");
    dojo.require("dijit.MenuBar");
    dojo.require("dijit.MenuBarItem");
    dojo.require("dijit.Dialog");
    dojo.require("dijit.form.Form");
    dojo.require("dojox.fx.easing");

    dojo.addOnLoad(function() {
          dijit.byId("login").show();
    });
</script>
<!-- THIS IS A LOGIN WEBPAGE -->
<div dojoType="dijit.layout.TabContainer" style="width:100%;" doLayout="false" region="center">
{% if form.errors %}
<script type="dojo/method">
    dojo.addOnLoad(function() {
         var easingArea = dojo.byId("login");
             var easingCoords = dojo.coords(easingArea);
        dojo.animateProperty({
             node: dojo.byId("login"),
             easing: dojox.fx.easing["elasticInOut"],
             duration: 1000,
              properties: {
                    left: easingCoords.x-5,
                    top:easingCoords.y-5 
              }
           }).play();
    });
</script>
<p>{% trans "Your username and password didn't match. Please try again." %}</p>
{% endif %}

{% if user.is_authenticated %}
<p>{% blocktrans with user.username as username %}Welcome, {{ username }}. Thanks for logging in.{% endblocktrans %}</p>
{% else %} 
<div id="login" dojoType="dijit.Dialog" title="Welcome to FreeNAS 8">
    <h3>Please log in.</h3>
<form action="." method="post">{% csrf_token %}
<table>
<tr>
    <td>{{ form.username.label_tag }}</td>
    <td>{{ form.username }}</td>
</tr>
<tr>
    <td>{{ form.password.label_tag }}</td>
    <td>{{ form.password }}</td>
</tr>
</table>
<button dojoType="dijit.form.Button" type="submit">{% trans "Log In" %}</button>
<input type="hidden" name="next" value="{{ next }}" />
</form>
    </div>
{% endif %}
</div>
{% endblock %}
