{% load i18n %}
<h5>
    {% if mp_list %}
    {% trans "Active Volumes" %}: <strong>{{ mp_list|length }}</strong>
    {% else %}
    {% trans "There are no active volumes." %}
    {% endif %}
</h5>
<table class="grid">
    <thead class="ghead">
        <td>{% trans "Volume" %}</td>
        <td>{% trans "Path" %}</td>
        <td>{% trans "Used" %}</td>
        <td>{% trans "Available" %}</td>
        <td>{% trans "Size" %}</td>
        <td>{% trans "Status" %}</td>
        <td>{% trans "Available actions" %}</td>
    </thead>
    <tbody>
	{% for m in mp_list %}
	<tr class="{% cycle 'odd' 'even' %}" id="{{ m.id }}">
	    <td>
		{{ m.mp_volume.vol_name }}
	    </td>
	    <td>
		{{ m.mp_path }}
	    </td>
	    <td>
		{{ m.used_si }} ({{ m.used_pct }})
	    </td>
	    <td>
		{{ m.avail_si }}
	    </td>
	    <td>
		{{ m.total_si }}
	    </td>
	    <td>
		{{ m.status }}
	    </td>
	    <td>
		{% if m.mp_ischild %}
    <button dojoType="dijit.form.Button" type="button"
        onClick="editObject('{% trans "Remove Dataset" %}', '{% url storage_dataset_delete object_id=m.id %}', [this,]);">{% trans "Remove dataset" %}</button>
		{% else %}
    <button dojoType="dijit.form.Button" type="button"
        onClick="editObject('{% trans "Delete Volume" %}', '{% url freeadmin_model_delete app="storage",model="Volume",oid=m.mp_volume.id %}', [this,]);">{% trans "Delete Volume" %}</button>
    <button dojoType="dijit.form.Button" type="button">
        {% trans "View Disks" %}
        <script type="dojo/method" event="onClick" args="evt">
            viewModel('{% trans "View Disks" %}', '{% url storage_datagrid_disks vid=m.mp_volume.id %}');
        </script>
    </button>
		{% endif %}
    <button dojoType="dijit.form.Button" type="button"
        onClick="editObject('{% trans "Change Permissions" %}', '{% url storage_mp_permission object_id=m.id %}', [this,]);">{% trans "Change Permissions" %}</button>
	    </td>
	</tr>
	{% empty %}
	<tr>
            <td colspan="7">{% trans "No volumes defined" %}</td>
	</tr>
	{% endfor %}
    </tbody>
</table>
<div style="padding:12px;">
<button dojoType="dijit.form.Button" type="button" >
    {% trans "Add Volume" %}
    <script type="dojo/method" event="onClick" args="evt">
        volumeWizard('{% trans "Add Volume" %}', '{% url storage_wizard %}', [this,]);
    </script>
</button>
{% if en_dataset %}
<button dojoType="dijit.form.Button" type="button" >
    {% trans "Add ZFS Dataset" %}
    <script type="dojo/method" event="onClick" args="evt">
        addObject('{% trans "Add ZFS Dataset" %}', '{% url storage_dataset %}', [this,]);
    </script>
</button>
{% endif %}
</div>

