{% extends "wizard_base.html" %}
{% block dojango_content %}
{% if user.is_authenticated %}

<div id="wiz" dojoType="dijit.Dialog" title="Storage Wizard"  dolayout="false">
        {% ifequal step0|add:1 step_count  %}
            <h3>Review & Save</h3>
	    <h4>Review and make sure that the following is correct.</h4>
        <table style="width:300px;">
        {% for label, list in wizard_data.lists %}
	{% if "0-" in label or "1-" in label %}
            <tr>
                <td class="label" style="width:120px;"><strong>{% if label == "0-volume_fstype" %}File System type{% else %}{% if label == "1-group_type" %}Group type{% else %}{% if label == "0-volume_disks" %}Disks{% else %}{% if label == "0-volume_name" %}Volume name{% endif %}{% endif %}{% endif %}{% endif %}</strong></td>
                <td class="descr" style="width:100px;">{% if label != "0-volume_disks" %}{% for data in list %}{{ data }}{% endfor %}{% else %}<ul>{% for dsk in list %}<li>{{ dsk }}</li>{% endfor %}</ul>{% endif %}</td>
            </tr>
	{% endif %}
        {% endfor %}
        </table>
        {% else %} 
            <h3>Easy Storage Setup</h3>
                <h4>Step {{ step0|add:1 }}</h4>
        {% endifequal %}
        <form action="." method="post">{% csrf_token %}
            <table>
                {{ form }}
            </table>
            <input type="hidden" name="{{ step_field }}" value="{{ step0 }}" />
            <input type="hidden" name="{{ max_step_field }}" value="{{ max_step }}" />
                {{ previous_fields|safe }}
		{% if step0 > 0 %}
                <button dojoType="dijit.form.Button" onClick="window.history.back();">
			&lt;&lt; Back
                </button>
		{% endif %}
                <button dojoType="dijit.form.Button" type="submit">
                    {% ifequal step0|add:1 step_count  %}
                        Create volume<br />
            <b style="color: red">Existing data will be cleared</b>
                    {% else %} 
                        Next &gt;&gt;
                    {% endifequal %}
                </button>
                <button dojoType="dijit.form.Button"type="button" onClick="window.location='/storage/'">Cancel</button>
        </form>
</div>
{% include "storage/common/volume_list.html" %}
{% else %}
    <p>Welcome. Please <a href="/freenas/login/">log in</a>.</p>
{% endif %}

{% endblock %}

