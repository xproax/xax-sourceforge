{% extends "freeadmin/generic_model_edit.html" %}
{% load i18n %}
{% block buttons_extra %}
            <button data-dojo-type="dijit.form.Button"> 
                <script type="dojo/event" event="onClick" args="e">
                    var sendbtn = this;
                    this.set('disabled', true);
                    form = getForm(this);
                    data = form.get('value');
                    dojo.xhrPost( {
                        url: '{% url system_testmail %}',
                        handleAs: 'json',
                        content: data,
                        load: function(data) { 
                            sendbtn.set('disabled', false);
                            if(!data.error) {
                                setMessage("{% trans "Your test email has been sent!"|force_escape %}");
                            } else {
                                setMessage("{% trans "Your test email could not be sent:"|force_escape %} "+data.errmsg, "error");
                            }
                        },
                     });
                </script>
            {% trans "Send Test Mail" %}
            </button>

{% endblock %}
{% block buttons %}
    <tr>
        <td>
        {% trans "HINT: Test e-mails are sent to root user. To configure it use Users -> root -> Change E-mail" %}
        </td>
    </tr>
{{ block.super }}
{% endblock %}
